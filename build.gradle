group 'com.macieju'
version '0.0.1'

apply plugin: 'java'
apply plugin: 'application'

sourceCompatibility = 1.8

mainClassName = 'com.macieju.exposeprivateapi.MainApplication'

project.ext {
    dropwizardVersion = '1.3.0-rc6'
}

repositories {
    mavenCentral()
}

dependencies {
    compile (
            'io.dropwizard:dropwizard-core:' + dropwizardVersion,
            'io.dropwizard:dropwizard-configuration:' + dropwizardVersion,
            'io.dropwizard:dropwizard-logging:' + dropwizardVersion,
            'io.dropwizard:dropwizard-client:' + dropwizardVersion,
            'io.dropwizard:dropwizard-jackson:' + dropwizardVersion,
            'io.dropwizard:dropwizard-auth:' + dropwizardVersion,
            'javax.xml.bind:jaxb-api:2.3.0',
            group: 'javax.activation', name: 'activation', version: '1.1.1'
    )
    testCompile group: 'junit', name: 'junit', version: '5.1.0'
}

task copyToLib(type: Copy) {
    into "$buildDir/lib" from "$buildDir/libs"
    into "$buildDir/lib" from configurations.runtime
}

build.dependsOn(copyToLib)

run {
    args 'server', './src/main/resources/config/config.yml'
}